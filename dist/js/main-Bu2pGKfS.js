import"./modulepreload-polyfill-B5Qt9EMX.js";import{c as w,a as y}from"./dom-utils-DWenbHzC.js";import{l as I,A as C,M as S}from"./ascii3d-engine-D20tJSJI.js";class b{constructor(){this.nav=null,this.navTrigger=null,this.navContent=null,this.navClose=null,this.isOpen=!1,this.developmentMode=this.isDevelopmentMode(),this.lockedSections=this.getLockedSections(),this.init()}isDevelopmentMode(){return window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.port==="3001"||window.location.port==="3000"}getLockedSections(){return{"/store.html":{locked:!0,status:"UNDER_DEVELOPMENT",message:"E-commerce integration in progress"},"/portfolio/videography.html":{locked:!1,status:"ACTIVE",message:null},"/portfolio/photography.html":{locked:!1,status:"ACTIVE",message:null},"/portfolio/video-editing.html":{locked:!1,status:"ACTIVE",message:null},"/portfolio/graphic-design.html":{locked:!1,status:"ACTIVE",message:null}}}init(){if(this.nav=document.querySelector(".floating-nav"),this.navTrigger=document.getElementById("navTrigger"),this.navContent=document.getElementById("navContent"),this.navClose=document.getElementById("navClose"),!this.nav||!this.navTrigger||!this.navContent){console.warn("Floating navigation elements not found");return}this.setupEventListeners(),this.setActivePage(),this.addSystemVariations(),this.developmentMode&&this.applyDevelopmentLocks(),console.log("Floating navigation initialized")}setupEventListeners(){this.navTrigger.addEventListener("click",t=>{t.preventDefault(),this.toggleNavigation()}),this.navClose&&this.navClose.addEventListener("click",t=>{t.preventDefault(),this.closeNavigation()}),document.addEventListener("click",t=>{this.isOpen&&!this.nav.contains(t.target)&&this.closeNavigation()}),document.addEventListener("keydown",t=>{t.key==="Escape"&&this.isOpen&&this.closeNavigation()}),this.navContent.querySelectorAll(".nav-link").forEach(t=>{t.addEventListener("click",i=>{const n=t.getAttribute("href");if(this.developmentMode&&this.isLocked(n)){i.preventDefault(),this.showAccessDenied(n);return}setTimeout(()=>{this.closeNavigation()},150)})})}toggleNavigation(){this.isOpen?this.closeNavigation():this.openNavigation()}openNavigation(){this.nav.classList.add("nav-open"),this.navTrigger.classList.add("active"),document.body.classList.add("nav-open"),this.isOpen=!0,this.navContent.classList.add("opening"),setTimeout(()=>{this.navContent.classList.remove("opening")},300)}closeNavigation(){this.nav.classList.remove("nav-open"),this.navTrigger.classList.remove("active"),document.body.classList.remove("nav-open"),this.isOpen=!1,this.navContent.classList.add("closing"),setTimeout(()=>{this.navContent.classList.remove("closing")},300)}setActivePage(){const e=window.location.pathname,t=this.navContent.querySelectorAll(".nav-link");t.forEach(i=>i.classList.remove("active")),t.forEach(i=>{const n=i.getAttribute("href");(e==="/"&&n==="/index.html"||e==="/index.html"&&n==="/index.html"||e==="/home.html"&&n==="/home.html"||e==="/home"&&n==="/home.html"||e.includes("/portfolio/directing")&&n==="/portfolio/directing.html"||e.includes("/portfolio/videography")&&n==="/portfolio/videography.html"||e.includes("/portfolio/photography")&&n==="/portfolio/photography.html"||e.includes("/portfolio/video-editing")&&n==="/portfolio/video-editing.html"||e.includes("/portfolio/graphic-design")&&n==="/portfolio/graphic-design.html"||e.includes("/store")&&n==="/store.html")&&i.classList.add("active")})}addSystemVariations(){const e=["standard","industrial","minimal"],t=e[Math.floor(Math.random()*e.length)];this.nav.classList.add(`nav-${t}`);const i=this.navContent.querySelector(".status-text");i&&(i.textContent=`SYSTEM_${t.toUpperCase()}`),this.addSystemIndicators(t),console.log(`Navigation variation: ${t}`)}addSystemIndicators(e){const t=this.navContent.querySelector(".nav-header");if(!t)return;const i=w(e);t.appendChild(i)}isLocked(e){const t=this.lockedSections[e];return t&&t.locked}showAccessDenied(e){const t=this.lockedSections[e];t&&this.createAccessDeniedModal(t)}createAccessDeniedModal(e){const t=document.querySelector(".access-denied-modal");t&&t.remove();const i=y(e),n=document.createElement("style");n.textContent=`
            .access-denied-modal {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                animation: modalFadeIn 0.3s ease;
            }
            
            .modal-content {
                background: #000;
                border: 2px solid #3300ff;
                max-width: 500px;
                margin: 20px;
                font-family: 'Courier New', monospace;
                color: #fff;
            }
            
            .modal-header {
                background: #3300ff;
                padding: 15px 20px;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
            
            .modal-title {
                font-weight: bold;
                font-size: 16px;
            }
            
            .modal-status {
                font-size: 12px;
                opacity: 0.8;
            }
            
            .modal-body {
                padding: 20px;
                line-height: 1.4;
            }
            
            .modal-message {
                margin: 0 0 10px 0;
                font-weight: bold;
            }
            
            .modal-info {
                margin: 0;
                opacity: 0.7;
                font-size: 14px;
            }
            
            .modal-footer {
                padding: 15px 20px;
                text-align: right;
                border-top: 1px solid #333;
            }
            
            .brutalist-button {
                background: #3300ff;
                color: #fff;
                border: none;
                padding: 8px 16px;
                font-family: 'Courier New', monospace;
                font-weight: bold;
                cursor: pointer;
                transition: background 0.2s;
            }
            
            .brutalist-button:hover {
                background: #4400cc;
            }
            
            @keyframes modalFadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
        `,document.head.appendChild(n),document.body.appendChild(i),i.querySelector(".modal-close").addEventListener("click",()=>{i.remove(),n.remove()}),i.addEventListener("click",o=>{o.target===i&&(i.remove(),n.remove())}),setTimeout(()=>{document.body.contains(i)&&(i.remove(),n.remove())},5e3)}applyDevelopmentLocks(){this.navContent.querySelectorAll(".nav-link").forEach(t=>{const i=t.getAttribute("href"),n=this.lockedSections[i];if(n&&n.locked){t.classList.add("nav-locked");const s=document.createElement("span");s.className="lock-indicator",s.textContent=" [LOCKED]",t.appendChild(s),t.style.opacity="0.5",t.style.textDecoration="line-through"}}),console.log("Development locks applied")}open(){this.openNavigation()}close(){this.closeNavigation()}toggle(){this.toggleNavigation()}isNavigationOpen(){return this.isOpen}lockSection(e,t="LOCKED",i="Section temporarily unavailable"){this.lockedSections[e]?(this.lockedSections[e].locked=!0,this.lockedSections[e].status=t,this.lockedSections[e].message=i):this.lockedSections[e]={locked:!0,status:t,message:i},this.developmentMode&&this.applyDevelopmentLocks()}unlockSection(e){this.lockedSections[e]&&(this.lockedSections[e].locked=!1,this.lockedSections[e].status="ACTIVE",this.lockedSections[e].message=null),this.navContent.querySelectorAll(".nav-link").forEach(i=>{if(i.getAttribute("href")===e){i.classList.remove("nav-locked"),i.style.opacity="",i.style.textDecoration="";const n=i.querySelector(".lock-indicator");n&&n.remove()}})}}document.addEventListener("DOMContentLoaded",()=>{window.floatingNav=new b});class x{constructor(){this.canvas=null,this.ctx=null,this.animationId=null,this.isRunning=!1,this.debug=!1,this.lastMouseUpdate=0,this.frameCount=0,this.lastFrameTime=0,this.fps=60,this.performanceMode="high",this.errorCount=0,this.maxErrors=10,this.frameTimeBuffer=new Array(10).fill(16.67),this.bufferIndex=0,this.skipFrames=0,this.mouseX=0,this.mouseY=0,this.targetMouseX=0,this.targetMouseY=0,this.currentShape="castle",this.targetShape="castle",this.morphProgress=0,this.morphDuration=2e3,this.morphStartTime=0,this.fontSize=12,this.lineHeight=14,this.characterColor="#FFFFFF",this.backgroundColor="#3300ff",this.backgroundAlpha=.1,this.renderCache=new Map,this.lastRenderKey=null,this.isDirty=!0,this.rotationAngle=0,this.depthLayers=[],this.keyframes={},this.rotationCache=new Map,this.lastRotationAngle=-1,this.rotationPrecision=.1,this.animationEasing=this.easeInOutCubic,this.restraintFactor=.1,this.shapes=this.initializeShapes()}init(e){try{return e?e.getContext?(window.requestAnimationFrame||(console.warn("ASCII Engine: requestAnimationFrame not supported, using fallback"),window.requestAnimationFrame=t=>setTimeout(t,16)),this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.ctx?(this.resizeCanvas(),this.ctx.font=`${this.fontSize}px Arial, monospace`,this.ctx.textAlign="left",this.ctx.textBaseline="top",this.ctx.fillStyle=this.characterColor,window.addEventListener("resize",()=>{try{this.resizeCanvas()}catch(t){this.handleError("Resize error",t)}}),this.loadKeyframes(),this.debug&&console.log("ASCII Engine: Initialized successfully"),this):this.failSoft(new Error("Could not get 2D context"))):(console.error("ASCII Engine: Canvas not supported"),this.failSoft(new Error("Canvas not supported"))):(console.error("ASCII Engine: Canvas element not provided"),this.failSoft(new Error("Canvas element missing")))}catch(t){return this.failSoft(t)}}resizeCanvas(){try{if(!this.canvas||!this.ctx)return;const e=this.canvas.getBoundingClientRect();this.canvas.width=e.width*window.devicePixelRatio,this.canvas.height=e.height*window.devicePixelRatio,this.canvas.style.width=e.width+"px",this.canvas.style.height=e.height+"px",this.ctx.scale(window.devicePixelRatio,window.devicePixelRatio),this.ctx.font=`${this.fontSize}px Arial, monospace`,this.ctx.textAlign="left",this.ctx.textBaseline="top"}catch(e){this.handleError("Canvas resize error",e)}}initializeShapes(){return{castle:["     ═══════════════════════","     ║█████████████████████║","     ║█║███║█████║███║█████║","     ║█║   ║█████║   ║█████║","     ║█║   ║█████║   ║█████║","     ║█████████████████████║","     ║█████████████████████║","     ║████║█████████║██████║","     ║████║    ╋    ║██████║","     ║████║  ╔═══╗  ║██████║","     ║████║  ║   ║  ║██████║","     ║████║  ║   ║  ║██████║","     ╚═════════════════════╝"],pxm:["     ████████████████████████","     ██████╗ ██╗  ██╗███╗   ███╗","     ██╔══██╗╚██╗██╔╝████╗ ████║","     ██████╔╝ ╚███╔╝ ██╔████╔██║","     ██╔═══╝  ██╔██╗ ██║╚██╔╝██║","     ██║     ██╔╝ ██╗██║ ╚═╝ ██║","     ╚═╝     ╚═╝  ╚═╝╚═╝     ╚═╝","     ════════════════════════════","        PAUL MIDDLETON","       CREATIVE STUDIOS","     ════════════════════════════"],sword:["           ╔═╗","           ║ ║","           ║ ║","           ║ ║","           ║ ║","           ║ ║","           ║ ║","           ║ ║","           ║ ║","         ╔═╝ ╚═╗","         ║ ╔═╗ ║","         ╚═╝ ╚═╝","           ███","           ███","           ███"],skyline:["     ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓","    ▓▓▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▓▓▓","   ▓▓▓░░░█████░░░██████░░░████░░░█████░░░███░░░████░░░██████░░░█████░░░▓▓▓","  ▓▓▓░░░░█████░░░██████░░░████░░░█████░░░███░░░████░░░██████░░░█████░░░░▓▓▓"," ▓▓▓░░░░░█████░░░██████░░░████░░░█████░░░███░░░████░░░██████░░░█████░░░░░▓▓▓","▓▓▓░░░░░░░███░░░░░████░░░░░██░░░░░███░░░░░█░░░░░██░░░░░████░░░░░███░░░░░░░▓▓▓","▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓"],star:["       ★","      ███","     █████","    ███████","   █████████","    ███████","     █████","      ███","       █"],verticalSword:["  ╔═╗","  ║█║","  ║█║","  ║█║","  ║█║","  ║█║","  ║█║","  ║█║","  ║█║","  ║█║","╔═╝█╚═╗","║█████║","╚══█══╝","  ███","  ███"]}}startAnimation(){if(!this.isRunning)return this.isRunning=!0,this.lastFrameTime=performance.now(),this.animate(),this}stopAnimation(){return this.isRunning=!1,this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null),this}animate(){try{if(!this.isRunning)return;const e=performance.now(),t=e-this.lastFrameTime;if(this.updatePerformanceMetrics(t),this.skipFrames>0&&this.frameCount%(this.skipFrames+1)!==0){this.lastFrameTime=e,this.animationId=requestAnimationFrame(()=>this.animate());return}this.updateMouseInterpolation(),this.updateMorphing(e),this.update3DEffects(e),this.isDirty&&(this.render(),this.isDirty=!1),this.lastFrameTime=e,this.animationId=requestAnimationFrame(()=>this.animate()),this.debug&&this.frameCount%120===0&&console.log(`ASCII Engine FPS: ${Math.round(this.fps)}, Mode: ${this.performanceMode}, Shape: ${this.currentShape}`)}catch(e){this.handleError("Animation loop error",e),this.failSoft(e)}}updatePerformanceMetrics(e){if(this.frameCount++,this.frameTimeBuffer[this.bufferIndex]=e,this.bufferIndex=(this.bufferIndex+1)%this.frameTimeBuffer.length,this.frameCount%30===0){const t=this.frameTimeBuffer.reduce((i,n)=>i+n)/this.frameTimeBuffer.length;this.fps=1e3/t,this.fps<30&&this.performanceMode!=="low"?this.setPerformanceMode("low"):this.fps<45&&this.performanceMode==="high"?this.setPerformanceMode("medium"):this.fps>55&&this.performanceMode!=="high"&&this.setPerformanceMode("high")}}setPerformanceMode(e){switch(this.performanceMode=e,this.renderCache.clear(),this.rotationCache.clear(),this.isDirty=!0,e){case"low":this.morphDuration=4e3,this.restraintFactor=.03,this.skipFrames=2,this.rotationPrecision=.2;break;case"medium":this.morphDuration=3e3,this.restraintFactor=.06,this.skipFrames=1,this.rotationPrecision=.15;break;case"high":default:this.morphDuration=2e3,this.restraintFactor=.1,this.skipFrames=0,this.rotationPrecision=.1;break}console.log(`ASCII Engine: Performance mode set to ${e}`)}updateMousePosition(e,t){const i=performance.now();if(this.lastMouseUpdate&&i-this.lastMouseUpdate<16)return;this.lastMouseUpdate=i,this.targetMouseX=e,this.targetMouseY=t,this.isDirty=!0;const n=this.canvas.getBoundingClientRect(),s=e/n.width;let o;s<.33?o="castle":s<.66?o="pxm":o="sword",o!==this.targetShape&&this.morphToShape(o)}updateMouseInterpolation(){const e=this.targetMouseX-this.mouseX,t=this.targetMouseY-this.mouseY;Math.abs(e)+Math.abs(t)<.5||(this.mouseX+=e*this.restraintFactor,this.mouseY+=t*this.restraintFactor,this.isDirty=!0)}morphToShape(e,t=null){if(!(!this.shapes[e]||e===this.targetShape))return this.targetShape=e,this.morphProgress=0,this.morphStartTime=performance.now(),t&&(this.morphDuration=t),this}updateMorphing(e){if(this.currentShape===this.targetShape)return;const t=e-this.morphStartTime,i=Math.min(t/this.morphDuration,1);this.morphProgress=this.animationEasing(i),this.morphProgress>=1&&(this.currentShape=this.targetShape,this.morphProgress=0)}easeInOutCubic(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}render(){try{if(!this.ctx)return;const e=`${this.currentShape}_${Math.round(this.mouseX)}_${Math.round(this.mouseY)}_${Math.round(this.rotationAngle*100)}_${this.morphProgress}`;if(this.performanceMode==="high"&&this.renderCache.has(e))return;this.ctx.fillStyle=this.backgroundColor,this.ctx.fillRect(0,0,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio);const t=this.getCurrentRenderShape(),i=this.canvas.width/window.devicePixelRatio,n=this.canvas.height/window.devicePixelRatio,s=this.getShapeWidth(t),o=t.length*this.lineHeight,a=(this.mouseX-i/2)*.05,c=(this.mouseY-n/2)*.05,u=Math.sin(this.rotationAngle)*10,m=(i-s)/2+a+u,f=(n-o)/2+c,h=Math.sin(this.rotationAngle);let p=-1;t.forEach((d,g)=>{const v=f+g*this.lineHeight,E=.2+.8*(1+Math.sin(h+g*.1))/2;Math.abs(E-p)>.05&&(this.ctx.fillStyle=`rgba(255, 255, 255, ${E.toFixed(2)})`,p=E),this.ctx.fillText(d,m,v)}),this.performanceMode!=="low"&&this.renderCache.size<20&&this.renderCache.set(e,!0)}catch(e){this.handleError("Render error",e)}}getCurrentRenderShape(){if(this.currentShape===this.targetShape||this.morphProgress===0)return this.shapes[this.currentShape];const e=`${this.currentShape}_${this.targetShape}_${Math.round(this.morphProgress*10)}`;if(this.renderCache.has(e))return this.renderCache.get(e);const t=this.shapes[this.currentShape],i=this.shapes[this.targetShape],n=this.morphProgress>.5?i:t;return this.renderCache.size<50&&this.renderCache.set(e,n),n}getShapeWidth(e){return Math.max(...e.map(t=>t.length))*(this.fontSize*.6)}loadShapes(e){return this.shapes={...this.shapes,...e},this}getPerformanceStats(){return{fps:Math.round(this.fps),performanceMode:this.performanceMode,isRunning:this.isRunning,morphProgress:this.morphProgress,currentShape:this.currentShape,targetShape:this.targetShape,errorCount:this.errorCount}}handleError(e,t){this.errorCount++,this.debug&&(console.error(`ASCII Engine ${e}:`,t),console.trace()),this.errorCount>this.maxErrors&&this.failSoft(new Error(`Too many errors (${this.errorCount})`))}failSoft(e){if(console.warn("ASCII Engine: Falling back to safe mode due to error:",e.message),this.stopAnimation(),this.ctx)try{this.ctx.fillStyle=this.backgroundColor,this.ctx.fillRect(0,0,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio)}catch(t){console.error("ASCII Engine: Could not clear canvas:",t)}return this.injectStaticFallback(),!1}injectStaticFallback(){if(!this.canvas||!this.canvas.parentNode)return;const e=document.createElement("div");e.style.cssText=`
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #FFFFFF;
            background: #3300ff;
            padding: 20px;
            font-family: monospace;
            text-align: center;
            border: 2px solid #FFFFFF;
            white-space: pre-line;
        `,e.textContent="PXM\\nSTUDIO\\nCREATIVE",this.canvas.parentNode.appendChild(e)}dispose(){try{this.stopAnimation(),this.renderCache.clear(),this.rotationCache.clear(),window.removeEventListener("resize",this.resizeCanvas),this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.ctx=null,this.canvas=null,this.frameTimeBuffer=null,this.debug&&console.log("ASCII Engine: Disposed cleanly with cache cleanup")}catch(e){console.error("ASCII Engine: Error during disposal:",e)}}loadKeyframes(){this.keyframes={castle:this.generateRotationFrames(this.shapes.castle),pxm:this.generateRotationFrames(this.shapes.pxm),sword:this.generateRotationFrames(this.shapes.sword)}}generateRotationFrames(e){const t=[];for(let n=0;n<36;n++){const s=n/36*Math.PI*2;t.push(this.rotateShape(e,s))}return t}rotateShape(e,t){return e}update3DEffects(e){const t=e*5e-4,i=this.mouseX/(this.canvas.width/window.devicePixelRatio)*.5,n=t+i;Math.abs(n-this.lastRotationAngle)>this.rotationPrecision&&(this.rotationAngle=n,this.lastRotationAngle=n,this.isDirty=!0)}loadKeyframes(e,t){return this.keyframes||(this.keyframes={}),this.keyframes[e]=t,this}}class D{constructor(){this.asciiEngine=null,this.isNavigationOpen=!1,this.floatingNav=null,this.use3DEngine=!1,this.engineInitialized=!1,this.init()}init(){I.info("Initializing High Fashion Brutalist Interface..."),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>this.initializeAll()):this.initializeAll()}initializeAll(){console.log("🚀 Starting full initialization...");try{this.initializeLoading(),this.initializeASCIIAnimation(),this.initializeNavigation(),this.initializeServiceBlocks(),this.initializeContactMethods(),this.initializeGeneralInteractions(),console.log("✨ High Fashion Brutalist Interface Ready")}catch(e){console.error("❌ Critical initialization error:",e);const t=document.getElementById("loadingScreen");t&&(console.log("🚨 Emergency: Force hiding loading screen"),t.style.opacity="0",setTimeout(()=>{t.parentNode&&t.remove()},500))}}async initializeASCIIAnimation(){console.log("🎨 Initializing ASCII animation with engine detection...");const e=document.getElementById("asciiCanvas");if(!e){console.warn("⚠️ ASCII canvas not found");return}try{await this.selectOptimalEngine(),await this.initializeSelectedEngine(e),console.log("✅ ASCII Animation Engine initialized successfully")}catch(t){console.error("❌ ASCII Engine initialization failed:",t)}}detectWebGLSupport(){var t,i,n,s;console.log("🔍 Detecting WebGL capabilities...");const e=performance.now();try{const o=document.createElement("canvas");if(!o)return console.warn("⚠️ Cannot create canvas element"),{supported:!1,reason:"Canvas creation failed"};let a=o.getContext("webgl2",{failIfMajorPerformanceCaveat:!0,antialias:!1}),c=null;if(a?(c="WebGL 2.0",console.log("✅ WebGL 2.0 supported")):(a=o.getContext("webgl",{failIfMajorPerformanceCaveat:!0,antialias:!1})||o.getContext("experimental-webgl",{failIfMajorPerformanceCaveat:!0,antialias:!1}),a&&(c="WebGL 1.0",console.log("✅ WebGL 1.0 supported"))),!a)return console.warn("⚠️ WebGL not supported"),{supported:!1,reason:"WebGL context creation failed"};const u=a.createShader(a.VERTEX_SHADER);if(!u)return console.warn("⚠️ Shader creation failed"),(t=a.getExtension("WEBGL_lose_context"))==null||t.loseContext(),{supported:!1,reason:"Shader creation failed"};const m=a.getParameter(a.MAX_TEXTURE_SIZE);if(m<512)return console.warn("⚠️ Insufficient texture support:",m),(i=a.getExtension("WEBGL_lose_context"))==null||i.loseContext(),{supported:!1,reason:"Insufficient texture support"};const f=a.getExtension("WEBGL_debug_renderer_info"),h=f?a.getParameter(f.UNMASKED_RENDERER_WEBGL):"Unknown",p=/mobile|android|ios|iphone|ipad/i.test(navigator.userAgent)||/Mali|Adreno|PowerVR|Tegra/i.test(h),d=a.createFramebuffer();if(!d)return console.warn("⚠️ Framebuffer creation failed"),(n=a.getExtension("WEBGL_lose_context"))==null||n.loseContext(),{supported:!1,reason:"Framebuffer creation failed"};a.deleteShader(u),a.deleteFramebuffer(d),(s=a.getExtension("WEBGL_lose_context"))==null||s.loseContext();const g=performance.now()-e;return console.log(`🚀 WebGL detection completed in ${g.toFixed(2)}ms`),{supported:!0,version:c,renderer:h,isMobile:p,maxTextureSize:m,detectionTime:g,reason:"WebGL fully supported"}}catch(o){const a=performance.now()-e;return console.error("❌ WebGL detection error:",o),{supported:!1,reason:`WebGL detection failed: ${o.message}`,detectionTime:a}}}async selectOptimalEngine(){console.log("⚙️ Selecting optimal ASCII engine...");const e=localStorage.getItem("use3DEngine"),t=e==="true"?"3d":e==="false"?"2d":null;if(t){console.log(`👤 User preference: ${t.toUpperCase()} engine`),this.use3DEngine=t==="3d";return}const i=this.detectWebGLSupport();if(!i.supported){console.log(`📱 Using 2D engine: ${i.reason}`),this.use3DEngine=!1;return}this.assess3DEngineViability(i)?(console.log(`🌟 Using 3D engine: ${i.version} detected`),this.use3DEngine=!0):(console.log("📱 Using 2D engine: 3D engine not viable for current environment"),this.use3DEngine=!1)}assess3DEngineViability(e){return e.isMobile&&e.maxTextureSize<2048?(console.log("📱 Mobile device with limited GPU detected, preferring 2D"),!1):navigator.deviceMemory&&navigator.deviceMemory<4?(console.log("💾 Limited memory detected, preferring 2D"),!1):navigator.hardwareConcurrency&&navigator.hardwareConcurrency<4?(console.log("⚡ Limited CPU cores detected, preferring 2D"),!1):(navigator.getBattery&&navigator.getBattery().then(t=>{t.level<.2&&!t.charging&&console.log("🔋 Low battery detected, consider switching to 2D mode")}),!0)}async initializeSelectedEngine(e){if(console.log(`🚀 Initializing ${this.use3DEngine?"3D":"2D"} ASCII engine...`),this.use3DEngine)try{await this.initialize3DEngine(e)}catch(t){console.warn("⚠️ 3D engine initialization failed, falling back to 2D:",t),await this.fallbackTo2DEngine(e,t)}else await this.initialize2DEngine(e)}async initialize3DEngine(e,t=0){console.log("🎯 Initializing 3D ASCII engine...");try{this.asciiEngine=new C,await this.asciiEngine.init(e);const i=this.selectWeightedRandomModel();console.log(`🎲 Loading random weighted model: ${i}`),await this.asciiEngine.loadModel(i),this.asciiEngine.startAnimation(),this.engineInitialized=!0,this.use3DEngine=!0,console.log("✅ 3D ASCII engine initialized successfully"),localStorage.setItem("lastWorkingEngine","3d")}catch(i){if(console.error("❌ 3D engine initialization error:",i),t<2&&this.isTransientError(i))return console.log(`🔄 Retrying 3D engine initialization (attempt ${t+1}/2)...`),await new Promise(n=>setTimeout(n,100)),await this.initialize3DEngine(e,t+1);throw i}}async initialize2DEngine(e){console.log("🎯 Initializing 2D ASCII engine...");try{this.asciiEngine=new x,this.asciiEngine.init(e).startAnimation(),this.engineInitialized=!0,this.use3DEngine=!1,console.log("✅ 2D ASCII engine initialized successfully"),localStorage.setItem("lastWorkingEngine","2d")}catch(t){throw console.error("❌ 2D engine initialization failed:",t),t}}async fallbackTo2DEngine(e,t){console.log("🔄 Falling back to 2D ASCII engine...");try{this.asciiEngine&&(typeof this.asciiEngine.dispose=="function"&&await this.asciiEngine.dispose(),this.asciiEngine=null),await this.initialize2DEngine(e),localStorage.setItem("engine3DFailed","true"),localStorage.setItem("engine3DFailureReason",t.message),console.log("✅ Successfully fell back to 2D engine")}catch(i){throw console.error("❌ Fallback to 2D engine also failed:",i),new Error(`Both engines failed: 3D(${t.message}), 2D(${i.message})`)}}isTransientError(e){return[/context lost/i,/temporary/i,/timeout/i,/network/i,/loading/i].some(i=>i.test(e.message))}selectWeightedRandomModel(){const e=Object.keys(S),t=Object.values(S),i=[];let n=0;for(const o of t)n+=o,i.push(n);const s=Math.random()*n;for(let o=0;o<i.length;o++)if(s<=i[o])return e[o];return e[0]}initializeLoading(){console.log("🔄 Initializing loading screen...");const e=document.getElementById("loadingScreen");if(!e){console.error("❌ Loading screen element not found!");return}console.log("✅ Loading screen found, will hide in 2 seconds..."),setTimeout(()=>{console.log("🎯 Adding loaded class to loading screen..."),e.classList.add("loaded"),setTimeout(()=>{console.log("🗑️ Removing loading screen from DOM..."),e.parentNode?(e.remove(),console.log("✅ Loading screen removed successfully")):console.warn("⚠️ Loading screen already removed")},1500)},1e3)}initializeNavigation(){const e=document.getElementById("navTrigger"),t=document.getElementById("navContent"),i=document.getElementById("navClose");if(!e||!t)return;const n=()=>{this.isNavigationOpen=!0,e.classList.add("active"),t.classList.add("active"),document.body.style.overflow="hidden"},s=()=>{this.isNavigationOpen=!1,e.classList.remove("active"),t.classList.remove("active"),document.body.style.overflow=""};e.addEventListener("click",()=>{this.isNavigationOpen?s():n()}),i&&i.addEventListener("click",s),document.addEventListener("keydown",o=>{o.key==="Escape"&&this.isNavigationOpen&&s()}),t.addEventListener("click",o=>{o.target===t&&s()})}initializeServiceBlocks(){document.querySelectorAll(".service-block").forEach(t=>{const i=t.dataset.service;t.addEventListener("click",()=>{i&&(window.location.href=`/portfolio/${i}`)}),t.addEventListener("mouseenter",()=>{t.style.transform="translateY(-4px) scale(1.02)"}),t.addEventListener("mouseleave",()=>{t.style.transform="translateY(0) scale(1)"})})}initializeContactMethods(){document.querySelectorAll(".contact-method").forEach(t=>{t.addEventListener("mouseenter",()=>{t.classList.contains("primary")&&(t.style.transform="translateX(10px)")}),t.addEventListener("mouseleave",()=>{t.classList.contains("primary")&&(t.style.transform="translateX(0)")})})}initializeGeneralInteractions(){const e=document.querySelectorAll(".composition-element"),t=s=>{const o=s.clientX||(s.touches&&s.touches[0]?s.touches[0].clientX:0),a=s.clientY||(s.touches&&s.touches[0]?s.touches[0].clientY:0),c=o/window.innerWidth,u=a/window.innerHeight,f="ontouchstart"in window||navigator.maxTouchPoints>0?5:1;this.asciiEngine&&this.asciiEngine.updateMousePosition(o,a),e.forEach((h,p)=>{const d=(p+1)*.5*f,g=(c-.5)*d,v=(u-.5)*d;h.style.transform=`translate(${g}px, ${v}px) ${h.style.transform}`})};document.addEventListener("mousemove",t),document.addEventListener("touchmove",t,{passive:!1}),document.addEventListener("touchstart",t,{passive:!1});const i=document.querySelector(".primary-statement");i&&(i.addEventListener("mouseenter",()=>{i.style.letterSpacing="0.02em"}),i.addEventListener("mouseleave",()=>{i.style.letterSpacing="-0.05em"}));const n=document.querySelector(".fragment-content");n&&n.addEventListener("click",()=>{const s=["EVERY FRAME IS A STATEMENT.<br>EVERY CUT IS AN ARGUMENT.<br>EVERY COMPOSITION CHALLENGES<br>THE COMFORTABLE NARRATIVE.","VISUAL LANGUAGE TRANSCENDS<br>SPOKEN WORDS.<br>SILENCE SPEAKS LOUDER<br>THAN EXPLANATION.","BEAUTY EXISTS IN THE<br>UNCOMFORTABLE TRUTH.<br>PERFECTION IS THE ENEMY<br>OF AUTHENTIC EXPRESSION."],a=(parseInt(n.dataset.manifestoIndex||"0")+1)%s.length,c=n.querySelector("p");c&&(c.innerHTML=s[a]),n.dataset.manifestoIndex=a}),this.initializeScrollAnimations()}initializeScrollAnimations(){const e={threshold:.1,rootMargin:"0px 0px -50px 0px"},t=new IntersectionObserver(n=>{n.forEach(s=>{s.isIntersecting&&(s.target.style.opacity="1",s.target.style.transform="translateY(0)")})},e);document.querySelectorAll(".service-block, .contact-fragment, .fragment-content").forEach(n=>{n.style.opacity="0",n.style.transform="translateY(30px)",n.style.transition="all 0.8s cubic-bezier(0.23, 1, 0.32, 1)",t.observe(n)})}async destroy(){if(console.log("🧹 Cleaning up High Fashion Brutalist Interface..."),this.asciiEngine)try{typeof this.asciiEngine.stopAnimation=="function"&&this.asciiEngine.stopAnimation(),typeof this.asciiEngine.dispose=="function"&&(await this.asciiEngine.dispose(),console.log(`✅ ${this.use3DEngine?"3D":"2D"} engine disposed successfully`)),this.asciiEngine=null,this.engineInitialized=!1}catch(e){console.error("⚠️ Error during engine cleanup:",e)}document.body.style.overflow="",console.log("✅ Cleanup completed")}}const r=new D;window.HighFashionBrutalist=r;window.addEventListener("beforeunload",async()=>{await r.destroy()});typeof window<"u"&&(window.HighFashionBrutalist=r,window.switchTo3D=async()=>{console.log("🌟 Switching to 3D engine...");const l=r.detectWebGLSupport();if(l.supported)localStorage.setItem("use3DEngine","true"),localStorage.removeItem("engine3DFailed"),location.reload();else return console.warn("⚠️ Cannot switch to 3D: WebGL not supported"),console.log("Reason:",l.reason),{error:"WebGL not supported",reason:l.reason}},window.switchTo2D=()=>{console.log("📱 Switching to 2D engine..."),localStorage.setItem("use3DEngine","false"),location.reload()},window.resetEnginePreference=()=>{console.log("🔄 Resetting engine preference to auto-detect..."),localStorage.removeItem("use3DEngine"),localStorage.removeItem("engine3DFailed"),localStorage.removeItem("lastWorkingEngine"),location.reload()},window.getEngineStats=()=>{const l={currentEngine:r.use3DEngine?"3D":"2D",engineInitialized:r.engineInitialized,webglSupport:r.detectWebGLSupport(),lastWorkingEngine:localStorage.getItem("lastWorkingEngine"),engine3DFailed:localStorage.getItem("engine3DFailed")==="true",engine3DFailureReason:localStorage.getItem("engine3DFailureReason")};return r.asciiEngine&&typeof r.asciiEngine.getPerformanceStats=="function"?{...l,performance:r.asciiEngine.getPerformanceStats()}:{...l,performance:{error:"No engine performance stats available"}}},window.testWebGL=()=>r.detectWebGLSupport(),window.restartEngine=async()=>{console.log("🔄 Restarting ASCII engine..."),r.asciiEngine&&await r.destroy(),await r.initializeASCIIAnimation(),console.log("✅ Engine restarted")},console.log("🛠️ Development helpers available:"),console.log("  switchTo3D() - Force 3D engine (with WebGL validation)"),console.log("  switchTo2D() - Force 2D engine"),console.log("  resetEnginePreference() - Reset to auto-detect mode"),console.log("  getEngineStats() - Get comprehensive engine information"),console.log("  testWebGL() - Test WebGL capabilities"),console.log("  restartEngine() - Restart current engine (for testing)"),setTimeout(()=>{const l=window.getEngineStats();console.log("🎯 Current Engine Status:",{engine:l.currentEngine,initialized:l.engineInitialized,webglSupported:l.webglSupport.supported})},1e3));
